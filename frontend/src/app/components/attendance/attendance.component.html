<div class="container">
  <button (click)="goBack()" class="btn-back">‚Üê Back to Dashboard</button>

  <div class="attendance-section">
    <div class="section-header">
      <h1>üìã Attendance Record</h1>
    </div>

    <div class="attendance-form">
      <h3>Mark Today's Attendance</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Employee: {{ currentUser?.firstName }} {{ currentUser?.lastName }}</label>
        </div>
        <div class="form-group">
          <label>Date</label>
          <input type="date" [(ngModel)]="newAttendance.date" />
        </div>
        <div class="form-group">
          <label>Status</label>
          <select [(ngModel)]="newAttendance.status">
            <option value="present">‚úì Present</option>
            <option value="absent">‚úó Absent</option>
            <option value="half-day">‚óê Half Day</option>
            <option value="leave">üóìÔ∏è Leave</option>
          </select>
        </div>
        <div class="form-group">
          <label>Remarks</label>
          <input
            type="text"
            [(ngModel)]="newAttendance.remarks"
            placeholder="Add any remarks"
          />
        </div>
        <button (click)="markAttendance()" class="btn-mark">Mark Attendance</button>
      </div>
    </div>

    <div class="attendance-list">
      <h3>Attendance History</h3>
      <div *ngIf="loading" class="loading">Loading...</div>
      <div *ngIf="!loading && attendance.length === 0" class="empty">
        No attendance records found
      </div>
      <div *ngIf="!loading && attendance.length > 0" class="table-responsive">
        <table class="attendance-table">
          <thead>
            <tr>
              <th *ngIf="isAdmin">Employee</th>
              <th>Date</th>
              <th>Status</th>
              <th>Check-in</th>
              <th>Check-out</th>
              <th>Remarks</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let record of attendance">
              <td *ngIf="isAdmin">{{ record.employeeId || '-' }}</td>
              <td>{{ record.date | date: 'MMM dd, yyyy' }}</td>
              <td>
                <span
                  class="status-badge"
                  [style.background-color]="getStatusColor(record.status)"
                >
                  {{ record.status | titlecase }}
                </span>
              </td>
              <td>{{ record.checkInTime ? (record.checkInTime | date: 'HH:mm') : '-' }}</td>
              <td>{{ record.checkOutTime ? (record.checkOutTime | date: 'HH:mm') : '-' }}</td>
              <td>{{ record.remarks || '-' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
